const apartments = [
    {
        sale: '',
        offer: '',
        star: 'img/star_1.png',
        name: 'Студия №44',
        look: 'без отделки',
        square: 28,
        floor: '12/14',
        price: 1900000,
        img: 'img/apartments/1.png',
        rooms: 0,
        mark: 'busy',
        status: 'Забронировано'
    },
    {
        sale: '',
        offer: '',
        star: 'img/star_2.png',
        name: 'Однокомнатная №666',
        look: 'базовая отделка',
        square: 66,
        floor: '6/6',
        price: 1666666,
        img: 'img/apartments/2.png',
        rooms: 1,
        mark: 'free',
        status: 'Свободно'
    },
    {
        sale: '',
        offer: '',
        star: 'img/star_1.png',
        name: 'Двухкомнатная №567',
        look: 'черновая отделка',
        square: 65.6,
        floor: '7/14',
        price: 5900000,
        img: 'img/apartments/3.png',
        rooms: 2,
        mark: 'sold',
        status: 'Продано'
    },
    {
        sale: '',
        offer: '',
        star: 'img/star_2.png',
        name: 'Трехкомнатная №45',
        look: 'без отделки',
        square: 56,
        floor: '1/14',
        price: 12900000,
        img: 'img/apartments/4.png',
        rooms: 3,
        mark: 'booked',
        status: 'Забронировано'
    },
    {
        sale: '-17%',
        offer: 'Шок цена!',
        star: 'img/star_1.png',
        name: 'Студия  №25',
        look: 'черновая отделка',
        square: 18,
        floor: '12/14',
        price: 1900000,
        img: 'img/apartments/5.png',
        rooms: 0,
        mark: 'booked',
        status: 'Забронировано'
    },
    {
        sale: '-6%',
        offer: '',
        star: 'img/star_2.png',
        name: 'Четырехкомнатная №259',
        look: 'черновая отделка',
        square: 98,
        floor: '14/14',
        price: 23900000,
        img: 'img/apartments/6.png',
        rooms: 4,
        mark: 'booked',
        status: 'Забронировано'
    },
    {
        sale: '',
        offer: '',
        star: 'img/star_2.png',
        name: 'Однокомнатная №56',
        look: 'без отделки',
        square: 36,
        floor: '3/6',
        price: 5666666,
        img: 'img/apartments/7.png',
        rooms: 1,
        mark: 'free',
        status: 'Свободно'
    },
    {
        sale: '',
        offer: '',
        star: 'img/star_2.png',
        name: 'Трехкомнтаная №46',
        look: 'черновая отделка',
        square: 86,
        floor: '1/6',
        price: 5696664,
        img: 'img/apartments/8.png',
        rooms: 3,
        mark: 'free',
        status: 'Свободно'
    },
    {
        sale: '-9%',
        offer: 'Шок цена!',
        star: 'img/star_2.png',
        name: 'Однокомнатная №2',
        look: 'черновая отделка',
        square: 18,
        floor: '3/14',
        price: 1200000,
        img: 'img/apartments/9.png',
        rooms: 1,
        mark: 'booked',
        status: 'Забронировано'
    },
    {
        sale: '-6%',
        offer: '',
        star: 'img/star_2.png',
        name: 'Студия №12',
        look: 'черновая отделка',
        square: 38,
        floor: '6/14',
        price: 1500500,
        img: 'img/apartments/10.png',
        rooms: 0,
        mark: 'booked',
        status: 'Забронировано'
    },
    {
        sale: '-6%',
        offer: '',
        star: 'img/star_2.png',
        name: 'Однокомнатная №8',
        look: 'черновая отделка',
        square: 48,
        floor: '3/14',
        price: 6200000,
        img: 'img/apartments/11.png',
        rooms: 1,
        mark: 'booked',
        status: 'Забронировано'
    },
    {
        sale: '-6%',
        offer: '',
        star: 'img/star_2.png',
        name: 'Двухкомнатная №23',
        look: 'базовая отделка',
        square: 48,
        floor: '3/14',
        price: 5255006,
        img: 'img/apartments/12.png',
        rooms: 2,
        mark: 'booked',
        status: 'Забронировано'
    }
]
let outStr = apartments.map(item => item), list;

outStr = '';
list = document.querySelector('.apartments__inner');
apartmentsOut();
function apartmentsOut(counter = 0) {
    for (let i = counter; i < apartments.length; i++) {
        outStr += `
        <div class="apartments__item apartment d-flex ${apartments[i].mark}">
            <div class="apartment__inner">
                <div class="apartment__top-line top-line d-flex">
                    <div class="top-line__sale">${apartments[i].sale}</div>
                    <div class="top-line__offer">${apartments[i].offer}</div>
                    <div class="top-line__star"><img src="${apartments[i].star}"  alt=""></div>
                </div>
                <div class="apartment__img d-flex">
                    <img src="${apartments[i].img}" alt="">
                </div>
                <div class="apartment__description">
                    <p class="apartment__title">${apartments[i].name}</p>
                    <div class="apartment__props props d-flex">
                        <div class="props__look">${apartments[i].look}</div>
                        <div class="props__square"><span>${apartments[i].square}</span> м<sup
                                class="props__text props__text_sup">2</sup>
                            <p class="props__text">площадь</p>
                        </div>
                        <div class="props__floor"><span>${apartments[i].floor}</span> <p class="props__text">этаж</p>
                        </div>
                    </div>
                    <div class="apartment__price"><span>${(apartments[i].price).toLocaleString('ru')}</span> руб.</div>
                </div>
            </div>
            <div class="apartment__status">${apartments[i].status}</div>
        </div>
        `
        list.innerHTML = outStr;
    }
    document.querySelector('.apartmentsCount').innerHTML = apartments.length;
}

let minPriceButton, maxPriceButton, minRoomButton, maxRoomButton;

minPriceButton = document.querySelector('.dropdown__item_min-price').onclick = minPrice;
function minPrice() {
    document.querySelector('.filter__button_price').style.transform = 'rotate(0deg)';
    outStr = '';
    apartments.sort(sortMinPrice);
    apartmentsOut();
}
function sortMinPrice(a, b) {
    const priceOne = a.price;
    const priceTwo = b.price;
    let comparsion = 0;
    if (priceOne > priceTwo) {
        comparsion = 1;
    } else if (priceOne < priceTwo) {
        comparsion = -1;
    }
    return comparsion;
}

maxPriceButton = document.querySelector('.dropdown__item_max-price').onclick = maxPrice;
function maxPrice() {
    document.querySelector('.filter__button_price').style.transform = 'rotate(-180deg)';
    outStr = '';
    apartments.sort(sortMaxPrice);
    apartmentsOut();
}
function sortMaxPrice(a, b) {
    const priceOne = a.price;
    const priceTwo = b.price;
    let comparsion = 0;
    if (priceOne < priceTwo) {
        comparsion = 1;
    } else if (priceOne > priceTwo) {
        comparsion = -1;
    }
    return comparsion;
}

minRoomButton = document.querySelector('.dropdown__item_min-rooms').onclick = minRooms;
function minRooms() {
    document.querySelector('.filter__button_room').style.transform = 'rotate(0deg)';
    outStr = '';
    apartments.sort(sortMinRooms);
    apartmentsOut();
}
function sortMinRooms(a, b) {
    const roomOne = a.rooms;
    const roomTwo = b.rooms;
    let comparsion = 0;
    if (roomOne > roomTwo) {
        comparsion = 1;
    } else if (roomOne < roomTwo) {
        comparsion = -1;
    }
    return comparsion;
}

maxRoomButton = document.querySelector('.dropdown__item_max-rooms').onclick = maxRooms;
function maxRooms() {
    document.querySelector('.filter__button_room').style.transform = 'rotate(-180deg)';
    outStr = '';
    apartments.sort(sortMaxRooms);
    apartmentsOut();
}
function sortMaxRooms(a, b) {
    const roomOne = a.rooms;
    const roomTwo = b.rooms;
    let comparsion = 0;
    if (roomOne < roomTwo) {
        comparsion = 1;
    } else if (roomOne > roomTwo) {
        comparsion = -1;
    }
    return comparsion;
}

//arrow
let smoothJumpUp = function () {
    if (document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) {
        window.scrollBy(0, -50);
        setTimeout(smoothJumpUp, 15);
    }
}
window.onscroll = function () {
    let scrolled = window.pageYOffset || document.documentElement.scrollTop;
    if (scrolled > 100) {
        document.querySelector('.top-arrow').style.display = 'block';
    } else {
        document.querySelector('.top-arrow').style.display = 'none';
    }
}

// validation e-mail
// function validate(form_id, email) {
//     let reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
//     let address = document.forms[form_id].elements[email].value;
//     if (reg.test(address) == false) {
//         let alertMessage = document.createElement('p');
//         let alertMessageOut = document.querySelector('.form__group');
//         alertMessage.className = 'alert';
//         alertMessage.innerHTML = 'Пожалуйста введите корректный e-mail';
//         alertMessageOut.insertBefore(alertMessage, alertMessageOut.children[1]);
//         return false;
//     }
// }



// document.querySelector('.apartments__more-button').onclick = showMore;
// function showMore() {

// }


